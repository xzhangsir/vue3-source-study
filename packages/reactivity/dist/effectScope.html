<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src = "./reactivity.global.js"></script>
</head>
<body>
    <script>
      const { ref, effect, reactive, toRefs, proxyRefs, effectScope } = VueReactivity
   /*     const state = reactive({
          name: "zx"
        })
       let runner1 = effect(() => {
          console.log("1",state.name);
        })
        let runner2 = effect(() => {
          console.log("2", state.name);
        })
        runner1.effect.stop()
        // runner2.effect.stop()
        setTimeout(() => {
          state.name = 'jw'
        }, 1000) */

        const state = reactive({
          name: "zx"
        })
        let scope = effectScope()

      /*   scope.run(()=>{
          effect(()=>{
            console.log("1",state.name);
          })
          effect(()=>{
            console.log("2",state.name);
          })
         })
         
         scope.stop() */

          scope.run(() => {
            effect(() => {
              console.log("1", state.name);
            })
            const innerScope = effectScope(true)
            // true代表是这个scope是独立的 父级管不了  否则 父级stop 这个scope也就stop了
            innerScope.run(() => {
              effect(() => {
                console.log("2", state.name);
              })
            })
          })
          scope.stop()

         setTimeout(() => {
            state.name = 'jw'
          }, 1000)
    </script>
</body>
</html>