{
  "version": 3,
  "sources": ["../src/index.ts", "../../shared/src/index.ts", "../../runtime-core/src/vnode.ts", "../../runtime-core/src/renderer.ts", "../../runtime-core/src/h.ts", "../src/nodeOps.ts", "../src/modules/attr.ts", "../src/modules/class.ts", "../src/modules/event.ts", "../src/modules/style.ts", "../src/patchProp.ts"],
  "sourcesContent": ["\r\nimport { createRenderer } from \"@vue/runtime-core\";\r\nimport { nodeOps } from \"./nodeOps\";\r\nimport { patchProp } from \"./patchProp\";\r\n\r\n\r\n// DOM\u548C\u5C5E\u6027\u7684API\r\n\r\nconst renderOptions =  Object.assign(nodeOps,{patchProp})\r\n\r\n\r\n// container  \u865A\u62DFdom\u6302\u8F7D\u5230\u54EA\u4E2A\u5BB9\u5668\u4E0A\r\nexport function render(vnode,container){\r\n  createRenderer(renderOptions).render(vnode,container)\r\n  \r\n}\r\n\r\n\r\n\r\nexport * from  \"@vue/runtime-core\"\r\n// console.log(renderOptions)\r\n", "export  const isObject = (val:any)=>{\r\n  return typeof val === 'object' && val !== null\r\n}\r\n\r\nexport const isFunction = (val)=>{\r\n  return typeof val === 'function'\r\n}\r\nexport const isString = (val)=>{\r\n  return typeof val === 'string'\r\n}\r\nexport const isNumber = (val)=>{\r\n  return typeof val === 'number'\r\n}\r\n\r\n\r\n// export const isArray = (val)=>{\r\n//   return Array.isArray(val)\r\n// }\r\n\r\nexport const isArray = Array.isArray\r\nexport const assign = Object.assign\r\n\r\n\r\n\r\n\r\nexport const enum ShapeFlags { // \u5F62\u72B6\u6807\u8BC6\r\n  ELEMENT = 1,\r\n  FUNCTIONAL_COMPONENT = 1 << 1,\r\n  STATEFUL_COMPONENT = 1 << 2,\r\n  TEXT_CHILDREN = 1 << 3,\r\n  ARRAY_CHILDREN = 1 << 4,\r\n  SLOTS_CHILDREN = 1 << 5,\r\n  TELEPORT = 1 << 6,\r\n  SUSPENSE = 1 << 7,\r\n  COMPONENT_SHOULD_KEEP_ALIVE = 1 << 8,\r\n  COMPONENT_KEPT_ALIVE = 1 << 9,\r\n  COMPONENT = ShapeFlags.STATEFUL_COMPONENT | ShapeFlags.FUNCTIONAL_COMPONENT\r\n}\r\n\r\n// \u4F4D\u8FD0\u7B97 & | \u9002\u5408\u6743\u9650\u7684\u7EC4\u5408 \r\n// let user = \u589E\u52A0\uFF0801\uFF09 | \u5220\u9664 \uFF0810\uFF09 \uFF1B 11\r\n// user\uFF0811\uFF09 & \u589E\u52A0\uFF0801\uFF09  \u5F97 01  \u6545\u800C\u5224\u65AD\u7528\u6237\u6709\u589E\u52A0\u7684\u6743\u9650\r\n", "\r\n// \u4E00\u4E2A\u865A\u62DF\u8282\u70B9 \u9700\u8981\u6709 \r\n// type props  children\r\n\r\nimport { isArray, isString, ShapeFlags } from \"@vue/shared\";\r\n\r\nexport const Text = Symbol(\"Text\")\r\n\r\nexport function isVnode(val){\r\n  return !!(val && val.__v_isVnode) \r\n}\r\n\r\nexport function isSameVnode(n1,n2){\r\n  // \u5224\u65AD\u4E24\u4E2A\u865A\u62DF\u8282\u70B9\u662F\u4E0D\u662F\u540C\u4E00\u4E2A\r\n  /**\r\n   *  - \u6807\u7B7E\u540D\u76F8\u540C\r\n   *  - key\u4E00\u6837\r\n  */\r\n return (n1.type === n2.type) && (n1.key === n2.key)\r\n\r\n}\r\n\r\n// \u865A\u62DF\u8282\u70B9\u6709\u5F88\u591A\uFF1A\u6BD4\u5982\uFF1A\u7EC4\u4EF6 \u5143\u7D20 \u6587\u672C\r\nexport function createVnode(type,props,children = null){\r\n  //\u7EC4\u5408\u65B9\u6848 shapeFlag  \u6807\u8BC6\r\n  //\u6211\u60F3\u77E5\u9053\u4E00\u4E2A\u5143\u7D20\u4E2D\u5305\u542B\u7684\u662F\u591A\u4E2A\u513F\u5B50\u8FD8\u662F\u4E00\u4E2A\u513F\u5B50\r\n  let shapeFlag = isString(type) ? ShapeFlags.ELEMENT : 0;\r\n\r\n\r\n  // \u865A\u62DFdom\u5C31\u662F\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u65B9\u4FBFdiff\u7B97\u6CD5\r\n  const vnode = {\r\n    type,\r\n    props,\r\n    children,\r\n    el:null,//\u865A\u62DF\u8282\u70B9\u4E0A\u5BF9\u5E94\u7684\u771F\u662F\u8282\u70B9\uFF0C\u540E\u7EEDdiff\u7B97\u6CD5\r\n    key:props?.['key'],\r\n    __v_isVnode:true,\r\n    shapeFlag\r\n  }\r\n\r\n  if(children){\r\n    let type = 0;\r\n    if(isArray(children)){\r\n      type = ShapeFlags.ARRAY_CHILDREN\r\n    }else{\r\n      children = String(children)\r\n      type = ShapeFlags.TEXT_CHILDREN\r\n    }\r\n    vnode.shapeFlag = shapeFlag | type\r\n  }\r\n\r\n  return vnode\r\n}", "import { isString, ShapeFlags } from \"@vue/shared\"\r\nimport { createVnode,Text,isSameVnode } from \"./vnode\"\r\n\r\nexport function createRenderer(renderOptions){\r\n\r\n  let {\r\n  // \u589E\u52A0\r\n  insert:hostInsert,\r\n  // \u5220\u9664\r\n  remove:hostRemove,\r\n  // \u4FEE\u6539\r\n  // \u4FEE\u6539\u6587\u672C\u5185\u5BB9\r\n  setElementText:hostSetElementText,\r\n  // \u4FEE\u6539\u6587\u672C\u5143\u7D20\r\n  setText:hostSetText,\r\n  parentNode:hostParentNode,\r\n  nextSibling:hostNextSibling,\r\n  // \u521B\u5EFA\r\n  createElement:hostCreateElement,\r\n  // \u521B\u5EFA\u6587\u672C\r\n  createText:hostCreateText,\r\n  // \u5C5E\u6027\u64CD\u4F5C\r\n  patchProp:hostPatchProp\r\n\r\n} = renderOptions\r\n\r\n\r\n  const normalize = (children,i)=>{\r\n    // \u5C06 \u5B57\u7B26\u4E32\u6587\u672C \u8F6C\u4E3A \uFF08Text,\"\u5B57\u7B26\u4E32\"\uFF09\r\n    if(isString(children[i])){\r\n       let vnode =  createVnode(Text,null,children[i])\r\n       children[i] = vnode\r\n    }\r\n    return children[i] \r\n  }\r\n\r\n  const mountChildren = (el,children)=>{\r\n    for(let i = 0 ; i < children.length;i++){\r\n      let child = normalize(children,i)\r\n      patch(null,child,el)\r\n    }\r\n  }\r\n\r\n\r\n  const mountElement = (vnode,container,anchor)=>{\r\n    let {type,props,children,shapeFlag} = vnode\r\n    // \u5C06\u521B\u5EFA\u7684\u771F\u5B9E\u5143\u7D20\u6302\u8F7D\u5230\u865A\u62DF\u8282\u70B9\u4E0A\uFF0C\u540E\u7EED\u65B9\u4FBF\u590D\u7528\u8282\u70B9\u548C\u66F4\u65B0\r\n    let el = vnode.el = hostCreateElement(type)\r\n\r\n    if(props){\r\n\r\n      for(let key in props){\r\n        hostPatchProp(el,key,null,props[key])\r\n      }\r\n\r\n    }\r\n\r\n    if(shapeFlag & ShapeFlags.TEXT_CHILDREN){\r\n      // \u5224\u65ADchildren\u662F\u4E0D\u662F\u6587\u672C\u8282\u70B9\r\n      hostSetElementText(el,children)\r\n\r\n    }else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN){\r\n      // \u5224\u65ADchildren\u662F\u4E2A\u6570\u7EC4\r\n      mountChildren(el,children)\r\n\r\n    }\r\n\r\n\r\n    // \u5C06\u521B\u5EFA\u7684\u5143\u7D20\u63D2\u5165\u5230\u5BB9\u5668\u4E2D\r\n    hostInsert(el,container,anchor)\r\n\r\n\r\n  }\r\n\r\n  const processText = (oldN,newN,container)=>{\r\n    if(oldN === null){\r\n      // \u6587\u672C\u521D\u6B21\u6E32\u67D3\r\n      hostInsert((newN.el = hostCreateText(newN.children)),container)\r\n    }else{\r\n      // \u6587\u672C\u66F4\u65B0 \u8282\u70B9\u590D\u7528 \u53EA\u6539\u6587\u672C\r\n      const el = newN.el = oldN.el\r\n      if(newN.children !== oldN.children){\r\n        hostSetText(el,newN.children)\r\n      }\r\n    }\r\n  }\r\n\r\n  const patchProps = (oldProps,newProps,el) => {\r\n    // \u65B0\u7684\u91CC\u9762\u6709\uFF0C\u76F4\u63A5\u7528\u65B0\u7684\u76D6\u6389\u8001\u7684\r\n    for(let key in newProps){\r\n      hostPatchProp(el,key,oldProps[key],newProps[key])\r\n    }\r\n    // \u5982\u679C\u8001\u7684\u91CC\u9762\u6709 \u65B0\u7684\u6CA1\u6709  \u5219\u662F\u5220\u9664\r\n    for(let key in oldProps){\r\n      if(newProps[key] == null){\r\n        hostPatchProp(el,key,oldProps[key],undefined)\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n\r\n  const unmountChildren = (children)=>{\r\n    for(let i = 0 ; i < children.length ; i++){\r\n      unmount(children[i])\r\n    }\r\n  }\r\n\r\n  const patchKeyChildren = (c1,c2,el)=>{\r\n    // \u6BD4\u8F83\u4E24\u4E2A\u513F\u5B50\u7684\u5DEE\u5F02\r\n    let i = 0;\r\n    let e1 = c1.length - 1;\r\n    let e2 = c2.length - 1;\r\n  \r\n    //\u5148\u5904\u7406\u7279\u6B8A\u60C5\u51B5 \u4E5F\u5C31\u662F\u6700\u7B80\u5355\u7684\r\n\r\n    /**\r\n     * \u65E7  a   b   c        |  a   b   c\r\n     *                      |\r\n     * \u65B0  a   b   c   d    |  a   b\r\n     * \r\n     */\r\n\r\n    // sync from start\r\n\r\n    while(i <= e1 && i <= e2){\r\n      const n1 = c1[i]\r\n      const n2 = c2[i]\r\n      if(isSameVnode(n1,n2)){ //\u6BD4\u8F83\u4E24\u4E2A\u8282\u70B9\u7684\u5C5E\u6027\u548C\u5B50\u8282\u70B9\r\n        patch(n1,n2,el)  //\u7EE7\u7EED\u6BD4\u8F83\u513F\u5B50\r\n      }else{\r\n        break;\r\n      }\r\n      i++\r\n    }\r\n\r\n     /**\r\n     * \u65E7      a   b   c   |    a   b   c\r\n     *                     |\r\n     * \u65B0  d   a   b   c   |        b   c\r\n     *    \r\n     *     i     \r\n     * \r\n     * \u8BA1\u7B97\u4E4B\u540E  i == 0 e1 == -1 e2 == 0\r\n     */\r\n\r\n      // sync from end\r\n\r\n      while(i <= e1 && i <= e2){\r\n        const n1 = c1[e1]\r\n        const n2 = c2[e2]\r\n        if(isSameVnode(n1,n2)){ //\u6BD4\u8F83\u4E24\u4E2A\u8282\u70B9\u7684\u5C5E\u6027\u548C\u5B50\u8282\u70B9\r\n          patch(n1,n2,el)  //\u7EE7\u7EED\u6BD4\u8F83\u513F\u5B50\r\n        }else{\r\n          break;\r\n        }\r\n        e1--;\r\n        e2--;\r\n      }\r\n      \r\n\r\n\r\n      // common sequence + mount (\u540C\u5E8F\u5217\u6302\u8F7D)\r\n      // i \u8981\u6BD4 e1 \u5927 \u8BF4\u660E\u6709\u65B0\u589E\u7684\r\n      // i \u548C   e2 \u4E4B\u95F4\u7684\u662F\u9700\u8981\u65B0\u589E\u7684\u90E8\u5206\r\n\r\n      if(i > e1){\r\n        if(i <= e2){\r\n          while(i <= e2){\r\n            const nextPos = e2 + 1;\r\n            // \u6839\u636E\u4E0B\u4E00\u4E2A\u4EBA\u7684\u7D22\u5F15\u6765\u770B\u53C2\u7167\u7269\r\n            const anchor = nextPos < c2.length ? c2[nextPos].el : null\r\n            patch(null,c2[i],el,anchor) //\u521B\u5EFA\u65B0\u589E\u90E8\u5206\u7684\u5143\u7D20\r\n            i++;\r\n          }\r\n        }\r\n      }else if( i > e2){\r\n         // common sequence + unmount (\u540C\u5E8F\u5217\u5378\u8F7D)\r\n        // i \u8981\u6BD4 e2 \u5927 \u8BF4\u660E\u6709\u5378\u8F7D\u7684\r\n        // i \u548C   e1 \u4E4B\u95F4\u7684\u662F\u9700\u8981\u5378\u8F7D\u7684\u90E8\u5206\r\n\r\n        /**\r\n         * \u65E7  a   b   c \r\n         * \r\n         * \u65B0      b   c\r\n         * \r\n         * */\r\n        if(i <= e1){\r\n            while(i <= e1){\r\n              unmount(c1[i])\r\n              i++\r\n            }\r\n        }\r\n      }\r\n\r\n      // \u7279\u6B8A\u7684\u5904\u7406\u5B8C\u6BD5 \u00B7\u00B7\r\n      // \u5F00\u59CB\u4E71\u5E8F\u6BD4\u8F83\r\n\r\n\r\n     \r\n\r\n\r\n\r\n\r\n\r\n\r\n  }\r\n\r\n  const patchChildren = (oldN,newN,el)=>{\r\n    // \u6BD4\u8F83\u4E24\u4E2A\u865A\u62DF\u8282\u70B9\u7684\u513F\u5B50\u7684\u5DEE\u5F02\r\n    // el\u5C31\u662F\u5F53\u524D\u7684\u7236\u8282\u70B9\r\n    const c1 = oldN && oldN.children\r\n    const c2 = newN && newN.children\r\n\r\n    // \u83B7\u53D6\u4E4B\u524D\u548C\u5F53\u524D\u9700\u8981\u66F4\u65B0\u7684\u8282\u70B9 shapeFlag\r\n\r\n    const prevShapeFlag = oldN.shapeFlag\r\n    const activeShapeFlag = newN.shapeFlag\r\n\r\n    // \u513F\u5B50\u53EF\u80FD\u662F  \u6587\u672C \u7A7A\u7684null \u6216\u8005 \u6570\u7EC4\r\n    // \u6BD4\u8F83\u4E24\u4E2A\u513F\u5B50\u5217\u8868\u7684\u5DEE\u5F02\r\n    /**\r\n     * \r\n     * -  \u65B0\u513F\u5B50    \u65E7\u513F\u5B50    \u64CD\u4F5C\u65B9\u5F0F\r\n     *  \r\n     *    \u6587\u672C      \u6570\u7EC4      \u5220\u9664\u65E7\u513F\u5B50\uFF0C\u8BBE\u7F6E\u6587\u672C\u5185\u5BB9\r\n     *    \u6587\u672C      \u6587\u672C      \u66F4\u65B0\u6587\u672C\u5373\u53EF\r\n     *    \u6587\u672C       \u7A7A       \u540C\u4E0A\uFF08\u66F4\u65B0\u6587\u672C\u5373\u53EF\uFF09\r\n     * \r\n     *    \u6570\u7EC4       \u6570\u7EC4      diff\u7B97\u6CD5\r\n     *    \u6570\u7EC4       \u6587\u672C      \u6E05\u7A7A\u6587\u672C \uFF0C\u8FDB\u884C\u6302\u8F7D\r\n     *    \u6570\u7EC4        \u7A7A        \u76F4\u63A5\u8FDB\u884C\u6302\u8F7D\r\n     * \r\n     *    \u7A7A        \u6570\u7EC4        \u5220\u9664\u6240\u6709\u513F\u5B50\r\n     *    \u7A7A        \u6587\u672C        \u6E05\u7A7A\u6587\u672C\r\n     *    \u7A7A        \u7A7A          \u4E0D\u5904\u7406\r\n    */\r\n   if(activeShapeFlag & ShapeFlags.TEXT_CHILDREN){\r\n    // \u73B0\u5728\u53D8 \u6587\u672C\r\n    if(prevShapeFlag & ShapeFlags.ARRAY_CHILDREN){\r\n      // \u5982\u679C\u539F\u6765\u7684\u662F\u6570\u7EC4  \u5148\u5220\u9664\u6240\u6709\u7684\u5B50\u8282\u70B9\r\n      unmountChildren(c1)\r\n    }\r\n    if(c1 !== c2){\r\n      hostSetElementText(el,c2)\r\n    }\r\n   }else if(activeShapeFlag & ShapeFlags.ARRAY_CHILDREN){\r\n    // \u73B0\u5728\u53D8\u6570\u7EC4\r\n      if(prevShapeFlag & ShapeFlags.ARRAY_CHILDREN){\r\n        // diff\u7B97\u6CD5 \u4E4B\u524D\u662F\u6570\u7EC4\r\n        patchKeyChildren(c1,c2,el)  //\u5168\u91CF\u6BD4\u5BF9\r\n\r\n      }else if(prevShapeFlag & ShapeFlags.TEXT_CHILDREN){\r\n        // \u4E4B\u524D\u662F\u6587\u672C\r\n        // \u5148\u6E05\u7A7A\u6587\u672C\r\n         hostSetElementText(el,\"\")\r\n         mountChildren(el,c2)\r\n      }\r\n   }else{\r\n    // \u73B0\u5728\u53D8\u7A7A \r\n      hostSetElementText(el,\"\")\r\n   }\r\n\r\n\r\n\r\n\r\n\r\n  }\r\n\r\n  const patchElement = (oldN,newN)=>{\r\n    let el = newN.el = oldN.el\r\n\r\n    let oldProps = oldN.props || {}\r\n    let newProps = newN.props || {}\r\n    // \u5148\u6BD4\u8F83\u5C5E\u6027  \r\n    patchProps(oldProps,newProps,el)\r\n    // \u518D\u6BD4\u8F83\u513F\u5B50\r\n    patchChildren(oldN,newN,el)\r\n\r\n  }\r\n\r\n  const processElement = (oldN,newN,container,anchor)=>{\r\n    if(oldN === null){\r\n      // \u521D\u6B21\u6E32\u67D3\uFF08\u5305\u62EC\u5143\u7D20\u7684\u521D\u6B21\u6E32\u67D3\u548C\u7EC4\u4EF6\u7684\u521D\u6B21\u6E32\u67D3\uFF09\r\n      mountElement(newN,container,anchor)\r\n    }else{\r\n      // \u66F4\u65B0\u6D41\u7A0B\r\n      /**\r\n       * - \u5982\u679C\u524D\u540E\u5B8C\u5168\u6CA1\u6709\u5173\u7CFB\uFF0C\u5220\u9664\u8001\u7684\uFF0C\u6DFB\u52A0\u65B0\u7684\r\n       * - \u8001\u7684\u548C\u65B0\u7684\u4E00\u6837 \u590D\u7528 \uFF0C\u5C5E\u6027\u53EF\u80FD\u4E0D\u4E00\u6837 \u518D\u5BF9\u6BD4\u5C5E\u6027\uFF0C\u66F4\u65B0\u5C5E\u6027\r\n       * - \u6BD4\u513F\u5B50\r\n      */\r\n      patchElement(oldN,newN)\r\n    }\r\n  }\r\n\r\n\r\n  // \u6838\u5FC3\u7684\u65B9\u6CD5 \u53C2\u6570\uFF1A\u8001\u8282\u70B9 \u65B0\u8282\u70B9 \u6302\u8F7D\u7684\u5BB9\u5668\r\n  const patch = (oldN,newN,container,anchor = null)=>{\r\n    if(oldN === newN) return null\r\n\r\n    // \u65B0\u8001\u8282\u70B9\u5B8C\u5168\u4E0D\u4E00\u81F4 \u76F4\u63A5\u5220\u9664\u8001\u7684 \u518D \u521B\u5EFA\u65B0\u7684\r\n    if(oldN && !isSameVnode(oldN,newN)){\r\n      unmount(oldN)\r\n      oldN = null\r\n    }\r\n\r\n\r\n    const {type,shapeFlag} = newN\r\n\r\n    switch(type){\r\n      case Text:\r\n          processText(oldN,newN,container)\r\n        break;\r\n      default:\r\n        if(shapeFlag & ShapeFlags.ELEMENT){\r\n          processElement(oldN,newN,container,anchor)\r\n        }\r\n    }\r\n  }\r\n\r\n  const unmount = (vnode)=>{\r\n    hostRemove(vnode.el)\r\n  }\r\n\r\n  // \u6E32\u67D3\u8FC7\u7A0B\u662F\u901A\u8FC7\u4F20\u5165\u7684 renderOptions \u6765\u6E32\u67D3\u7684\r\n  const render = (vnode,container)=>{\r\n    // console.log(vnode,container)\r\n    \r\n    if(vnode == null){\r\n    // \u5378\u8F7D\r\n    //\u5982\u679Cvnode\u662F\u7A7A\u7684 \u5C31\u6E05\u7A7Acontainer\u91CC\u9762\u7684\u5185\u5BB9 \r\n      if(container._vnode){\r\n        unmount(container._vnode)\r\n      }\r\n    }else{\r\n      // \u6302\u8F7D\r\n      // \u65E2\u6709\u521D\u59CB\u5316\u7684\u903B\u8F91 \u53C8\u6709\u66F4\u65B0\u7684\u903B\u8F91\r\n      patch(container._vnode || null,vnode,container)\r\n\r\n    }\r\n    //\u5C06\u4E0A\u4E00\u4E2A\u7684\u865A\u62DF\u8282\u70B9\u7F13\u5B58\u8D77\u6765\r\n    container._vnode = vnode\r\n\r\n    \r\n\r\n  }\r\n  return {\r\n    render\r\n  }\r\n  \r\n}\r\n// \u6587\u672C\u7684\u5904\u7406\uFF0C\u9700\u8981\u81EA\u5DF1\u589E\u52A0\u7C7B\u578B\uFF08Text\uFF09 \r\n// \u56E0\u4E3A\u4E0D\u80FD\u901A\u8FC7document.createElement(\"\u6587\u672C\")\u521B\u5EFA\u6587\u672C\u8282\u70B9\r\n", "import { isArray, isObject } from \"@vue/shared\"\r\nimport { createVnode, isVnode } from \"./vnode\"\r\n\r\n\r\n\r\n// h\u7684\u5199\u6CD5\r\n// h(\"div\")\r\n\r\n// h(\"div\",\"hello\")\r\n// h(\"div\",{style:{color:\"red\"}})\r\n// h(\"div\",h(\"span\"))\r\n// h(\"div\",[h(\"span\"),h(\"span\")])\r\n\r\n// h(\"div\",{style:{color:\"red\"}},\"hello\")\r\n// h(\"div\",null,\"hello\")\r\n// h(\"div\",null,\"hello\",'world')\r\n// h(\"div\",null,h(\"span\"))\r\n// h(\"div\",null,[h(\"span\"),h(\"span\")])\r\n\r\n// \r\n\r\n\r\nexport function h(type,propsChildren,children){\r\n\r\n  const l = arguments.length\r\n\r\n\r\n  if(l === 2){\r\n    // h(\"div\",\"hello\")\r\n    // h(\"div\",{style:{color:\"red\"}})\r\n    // h(\"div\",h(\"span\"))\r\n    // h(\"div\",[h(\"span\"),h(\"span\")])\r\n   /*  if(isArray(propsChildren)){\r\n      // \u662F\u6570\u7EC4\r\n      return createVnode(type,null,propsChildren)\r\n    }else{\r\n       if(isVnode(propsChildren)){\r\n        // \u865A\u62DF\u8282\u70B9\u5305\u88C5\u6210\u6570\u7EC4\r\n          return createVnode(type,null,[propsChildren])\r\n        }\r\n        // \u5C5E\u6027\r\n        return createVnode(type,propsChildren)\r\n    } */\r\n\r\n    if(isObject(propsChildren) && !isArray(propsChildren)){\r\n       if(isVnode(propsChildren)){\r\n        // \u865A\u62DF\u8282\u70B9\u5305\u88C5\u6210\u6570\u7EC4\r\n          return createVnode(type,null,[propsChildren])\r\n        }\r\n        // \u5C5E\u6027\r\n        return createVnode(type,propsChildren)\r\n    }else{\r\n       return createVnode(type,null,propsChildren)\r\n    }\r\n   \r\n\r\n  }else{\r\n    if(l > 3){\r\n      children = Array.from(arguments).slice(2)\r\n    }else if ( l === 3 && isVnode(children)){ // h(\"div\",{},h(\"span\"))\r\n      children = [children]\r\n    }\r\n    // children  \u53EF\u80FD\u662F\u6587\u672C \u4E5F\u53EF\u80FD\u662F\u6570\u7EC4\r\n    return createVnode(type,propsChildren,children)\r\n  }\r\n  \r\n}", "// \u8282\u70B9\u64CD\u4F5C\r\n\r\n\r\nexport const nodeOps = {\r\n  // \u589E\u52A0\r\n  insert(child,parent,anchor = null){\r\n    // \u5982\u679Canchor\u4E3Anull, insertBefore\u7B49\u4EF7\u4E8EappendChild\r\n    parent.insertBefore(child,anchor)\r\n  },\r\n  // \u5220\u9664\r\n  remove(child){\r\n    const  parentNode = child.parentNode\r\n    if(parentNode){\r\n      parentNode.removeChild(child)\r\n    }\r\n  },\r\n  // \u4FEE\u6539\r\n  // \u4FEE\u6539\u6587\u672C\u5185\u5BB9\r\n  setElementText(el,text){\r\n    // \u4E0D\u80FD\u76F4\u63A5\u4F7F\u7528innnerHTML\uFF0C\u56E0\u4E3A\u4F1A\u6267\u884C\u811A\u672C\r\n    el.textContent = text\r\n  },\r\n  // \u4FEE\u6539\u6587\u672C\u5143\u7D20\r\n  setText(node,text){\r\n    node.nodeValue = text\r\n  },\r\n  // \u67E5\u8BE2\r\n  querySelector(selector){\r\n    return  document.querySelector(selector)\r\n  },\r\n  parentNode(node){\r\n    return node.parentNode\r\n  },\r\n  nextSibling(node){\r\n    return node.nextSibling\r\n  },\r\n  // \u521B\u5EFA\r\n  createElement(tagName){\r\n    return document.createElement(tagName)\r\n  },\r\n  // \u521B\u5EFA\u6587\u672C\r\n  createText(text){\r\n    return document.createTextNode(text)\r\n  }\r\n\r\n\r\n}", "export function patchAttr(el,key,nextValue){\r\n  if(nextValue){\r\n    el.setAttribute(key,nextValue)\r\n  }else{\r\n    el.removeAttribute(key)\r\n  }\r\n}", "export function patchClass(el,nextValue){\r\n  if(nextValue == null){\r\n    // \u5982\u679C\u65B0\u7684class\u662F\u7A7A\u7684 \u5C31\u5220\u6389class\r\n    el.removeattribute(\"class\")\r\n  }else{\r\n    el.className = nextValue\r\n  }\r\n}", "function createInvoker(callback){\r\n  const invoker = (e)=>invoker.value(e)\r\n  invoker.value = callback\r\n  return invoker\r\n}\r\n\r\n\r\nexport function patchEvent(el,eventName,nextValue){\r\n  \r\n  // \u4E8B\u4EF6\u7ED1\u5B9A\u90FD\u7F13\u5B58\u5230\u4E86 \u5F53\u524D\u7684dom\u8EAB\u4E0A\r\n  let invokers = el._vei || (el._vel = {})\r\n\r\n  let exits = invokers[eventName]\r\n  // \u67E5\u770B\u4E8B\u4EF6\u662F\u5426\u7F13\u5B58\u8FC7 \u5E76\u4E14 nextValue \u8981\u6709\u503C\r\n  if(exits && nextValue){\r\n    // \u6CA1\u6709\u5378\u8F7D\u51FD\u6570 \u53EA\u662F\u6539\u4E86invoker\u7684value\u5C5E\u6027\r\n    exits.value = nextValue \r\n\r\n  }else{\r\n    // \u4E0D\u5B58\u5728\u5C31\u521B\u5EFA\u4E8B\u4EF6\r\n\r\n    // \u5148\u5C06 onClick \u8F6C\u4E3A click\r\n    let event = eventName.slice(2).toLowerCase()\r\n\r\n    // \u5C06\u4E8B\u4EF6\u7F13\u5B58\u8D77\u6765\r\n    if(nextValue){\r\n      const invoker = invokers[eventName] = createInvoker(nextValue)\r\n      el.addEventListener(event,invoker)\r\n    }else if(exits){\r\n      // \u4E4B\u524D\u6709\u503C \u73B0\u5728nextValue\u4E3A\u7A7A \u5C31\u79FB\u9664\u8FD9\u4E2A\u4E8B\u4EF6\r\n      el.removeEventListener(event,exits)\r\n      invokers[eventName] = null\r\n    }\r\n\r\n\r\n  }\r\n\r\n}", "export function patchStyle(el,prevValue,nextValue = {}){\r\n  // \u6837\u5F0F\u9700\u8981\u6BD4\u5BF9 prevValue\u548CnextValue\u7684\u5DEE\u5F02\r\n\r\n\r\n  for(let key in nextValue){\r\n    // \u7528\u65B0\u7684\u76F4\u63A5\u8986\u76D6\r\n    el.style[key] = nextValue[key]\r\n  }\r\n\r\n  \r\n  // \u5982\u679C\u65E7\u7684\u662F color:red;fontSize:20px\r\n  // \u65B0\u7684\u662F color\uFF1Ablue\r\n  // \u90A3\u4E48\u5C31\u9700\u8981\u5C06\u65E7\u7684fontSize\u5220\u9664\r\n  if(prevValue){\r\n    for(let key in prevValue){\r\n      if(nextValue[key] == null){\r\n        el.style[key] = null\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n}", "// DOM\u5C5E\u6027\u64CD\u4F5Capi\r\n\r\nimport { patchAttr } from \"./modules/attr\";\r\nimport { patchClass } from \"./modules/class\";\r\nimport { patchEvent } from \"./modules/event\";\r\nimport { patchStyle } from \"./modules/style\";\r\n\r\nexport function patchProp(el,key,prevValue,nextValue){\r\n  // \u7C7B\u540D  el.className\r\n  if(key === 'class'){\r\n    patchClass(el,nextValue)\r\n  }else if(key === 'style'){\r\n  // \u6837\u5F0F   el.style\r\n    patchStyle(el,prevValue,nextValue)\r\n  }else if(/^on[^a-z]/.test(key)){\r\n  // \u4E8B\u4EF6  events  addEventListener\r\n    patchEvent(el,key,nextValue)\r\n  }else{\r\n    // \u666E\u901A\u5C5E\u6027  el.setAttribute\r\n    patchAttr(el,key,nextValue)\r\n  }\r\n\r\n}"],
  "mappings": "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",
  "names": []
}
